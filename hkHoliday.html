<!DOCTYPE html>
<html lang="zh-HK">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>香港公眾假期 2026</title>
    <link rel="stylesheet" href="css/sidePages.css">
</head>

<body>

    <div class="container">
        <h1>香港公眾假期 2026</h1>

        <table>
            <thead>
                <tr>
                    <th>假期名稱</th>
                    <th>日期 (星期)</th>
                </tr>
            </thead>
            <tbody id="holidays"></tbody>
        </table>
        <div class="btnContainer">
            <a class="backBtn" href="index.html">BACK</a>
        </div>

        <script>
            const weekdays = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];

            fetch('json/hkHoliday.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('無法載入假期資料：' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    const holidays = data.vcalendar[0].vevent;
                    const tbody = document.getElementById('holidays');
                    const loading = document.getElementById('loading');
                    const errorDiv = document.getElementById('error');
                    const table = document.getElementById('table');

                    holidays.forEach(event => {
                        const dateStr = event.dtstart[0];
                        const year = dateStr.substring(0, 4);
                        const month = dateStr.substring(4, 6);
                        const day = dateStr.substring(6, 8);

                        const jsDate = new Date(`${year}-${month}-${day}`);
                        const weekday = weekdays[jsDate.getDay()];

                        const formattedDate = `${year}-${month}-${day} (${weekday})`;

                        const tr = document.createElement('tr');
                        tr.setAttribute('data-month', month);

                        const tdName = document.createElement('td');
                        tdName.textContent = event.summary;

                        const tdDate = document.createElement('td');
                        tdDate.textContent = formattedDate;

                        tr.appendChild(tdName);
                        tr.appendChild(tdDate);
                        tbody.appendChild(tr);
                    });

                    // Hide loading, show table
                    loading.style.display = 'none';
                    table.style.display = 'table';
                })
                .catch(err => {
                    const loading = document.getElementById('loading');
                    const errorDiv = document.getElementById('error');

                    loading.style.display = 'none';
                    errorDiv.style.display = 'block';
                    errorDiv.textContent = '載入失敗：' + err.message;
                    console.error(err);
                });
        </script>

</body>

</html>